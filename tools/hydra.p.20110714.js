(function(r){function z(a,c){if(!c)return a;var b=a.match(/(zfcTest=[^&]*)/);if(b)return a.replace(b[1],c);if(a.match(/\?/))return a+(a.match(/\?./)?"&":"")+c;return a+"?"+c}function u(a){for(var c=Math.random(),b=0,d=0,e=a.length;d<e;d++){b+=a[d].chance;if(c<b)return d}return 0}function v(a,c){for(var b=0,d=c.length;b<d;b++)if(c[b].name==a)return c[b];return null}function w(a){return(a=l.cookie.match("(?:^|;) *"+a+"=([^;]*)"))?a[1]:null}function s(a,c,b,d){var e;if(b){e=new Date;e.setTime(e.getTime()+
b*864E5);e="; expires="+e.toGMTString()}l.cookie=a+"="+c+(e?e:"")+"; path=/"+(d&&d!=""?"; domain="+d:"")}function o(a,c){return KEY_STR.indexOf(a.charAt(c))}var p=r.hydra={},l=document,x={"zfc.Cookie":{"1":{rule:"required",name:"session",decode:"zfc.Cookie.Session"},"2":{rule:"repeated",name:"tests",decode:"zfc.Cookie.Test"},fields:["1","2"]},"zfc.Cookie.Session":{"1":{rule:"required",type:"uint64",name:"timestamp"},"2":{rule:"required",type:"uint64",name:"connection"},"3":{rule:"optional",type:"uint64",
name:"timestamp2"},fields:["1","2","3"]},"zfc.Cookie.Test":{"1":{rule:"required",type:"string",name:"name"},"2":{rule:"optional",type:"uint32",name:"index"},"3":{rule:"optional",type:"uint32",name:"phase"},"4":{rule:"optional",type:"bool",name:"active"},fields:["1","2","3","4"]}};p.execTests=function(a,c){if(!a.length)return false;var b,d,e=r.zfcUPU||l.location.toString(),f,h=w("zfc");f=h?j.decode(b64d(h),"zfc.Cookie",x):null;var g=w("rfh"),i={};h=[];var k=[],m=[];f||(f={session:{timestamp:+new Date,
connection:Math.random()*1E13,timestamp2:+new Date},tests:[]});var n=f.tests=f.tests||[];if(g){parts=g.split(",");for(g=0;g<parts.length;g++){part=parts[g].split(":");if(part.length==2){b=part[1]|0;if(b>=0&&b<16){i[part[0]]=b;if(assignment=v(part[0],n))assignment.index=b}}}s("rfh","",-1,c)}g=0;for(var t=a.length;g<t;g++){b=a[g];assignment=v(b.name,n);if(!assignment){assignment={name:b.name,phase:b.phase,index:u(b.variants)};f.tests.push(assignment);if(i[b.name])n.index=i[b.name]}if(b.phase&&b.phase>
assignment.phase){assignment.phase=b.phase;assignment.index=u(b.variants);if(i[b.name])n.index=i[b.name]}if((!b.url||e.match(new RegExp(b.url)))&&!(b.excludeUrl&&e.match(new RegExp(b.excludeUrl)))){assignment.active=1;d=b.variants[assignment.index];if(!d)continue;if(d.setup)h.push(d.setup);else if(d.redirect){assignment.redirect=d.redirect;if(d.redirect=="domain")assignment.domain=d.domain;k.push(assignment)}}m.push({test:b,assignment:assignment})}(e=j.encode(f,"zfc.Cookie",x))&&s("zfc",b64e(e),10950,
c);if(k.length){e=l.location.toString();f=[];i=null;m=0;for(n=k.length;m<n;m++){g=k[m];if(g.domain)i=g.domain;else g.redirect=="param"&&f.push(g.name+":"+g.index)}k={domain:i,param:f.length?"zfcTest="+f.join(","):null};f=k.domain;if(!e||!f)f=e;else{i=l.location;if(i.protocol.match(/https/)||i.host.match(/secure-/))f="secure-"+f;f=e.replace(/:\/\/[^:\/]+/,"://"+f)}k=z(f,k.param);if(k!=e){l.referrer&&s("zfcReferrer",l.referrer.toString());l.location.replace(k);return}}g=0;for(t=h.length;g<t;g++)h[g]()};
for(var y={},q=4;q<20;q++)y[q]=Math.pow(2,7*q);var j=p.protobuf={decode:function(a,c,b){return j._decode(a,{},c,b)},_decode:function(a,c,b,d){var e,f,h,g;for(a={pointer:0,message:a};a.pointer<a.message.length;){e=j.decodeVarint(a);f=e&7;if(e=d[b][e>>3]){h=j.decodeField(a,f);f=e.name;if(g=e.decode)h=d[g].type==="enum"?d[g][h]:j._decode(h,{},g,d);if(e.rule==="repeated")if(c[f])c[f][c[f].length]=h;else c[f]=[h];else c[f]=h}}return c},decodeField:function(a,c){return c===2?j.decodeLengthDelimited(a):
j.decodeVarint(a)},decodeVarint:function(a){for(var c=0,b=0,d;d=a.message.charCodeAt(a.pointer++);){b+=c<4?(d&127)<<7*c++:(d&127)*y[c++];if(!(d&128))break}return b},decodeLengthDelimited:function(a){var c=j.decodeVarint(a),b=a.message.substring(a.pointer,a.pointer+c);a.pointer+=c;return b},encode:function(a,c,b){if(!a||!b[c])return"";for(var d,e="",f=b[c],h=f.fields,g=0,i=h.length;g<i;g++){c=h[g];d=f[c];if(d.decode)e+=b[d.decode].type==="enum"?j.encodeField(c,Number(b[d.decode][a[d.name]])):d.rule===
"repeated"?j.encodeRepeated(a[d.name],c,d.decode,b):j.encodeField(c,j.encode(a[d.name],d.decode,b));else if(d.rule==="repeated"){if(d=a[d.name])for(var k=0,m=d.length;k<m;k++)e+=j.encodeField(c,d[k])}else e+=j.encodeField(c,a[d.name])}return e},encodeRepeated:function(a,c,b,d){if(!a)return"";for(var e="",f=0,h=a.length;f<h;f++)e+=j.encodeField(c,j.encode(a[f],b,d));return e},encodeField:function(a,c,b){if(c===b||c==="")return"";b=typeof c==="number"?0:2;return j.encodeVarint(a<<3|b)+(b===0?j.encodeVarint(c):
j.encodeLengthDelimited(c))},encodeVarint:function(a){var c="";do c+=a>=128?String.fromCharCode(a&127|128):String.fromCharCode(a);while(a=a<4294967296?a>>>7:Math.floor(a/128));return c},encodeLengthDelimited:function(a){return j.encodeVarint(a.length)+a}};KEY_STR=r.__="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";p.b64e=b64e=function(a){for(var c="",b=0,d,e,f,h,g,i;b<a.length;){d=a.charCodeAt(b++);e=a.charCodeAt(b++);f=a.charCodeAt(b++);h=d>>2;d=(d&3)<<4|e>>4;g=(e&15)<<2|f>>
6;i=f&63;if(isNaN(e))g=i=64;else if(isNaN(f))i=64;c=c+KEY_STR.charAt(h)+KEY_STR.charAt(d)+KEY_STR.charAt(g)+KEY_STR.charAt(i)}return c};p.b64d=b64d=function(a){for(var c=String,b="",d=0,e,f,h,g,i,k;d<a.length;){h=o(a,d++);g=o(a,d++);i=o(a,d++);k=o(a,d++);e=(g&15)<<4|i>>2;f=(i&3)<<6|k;b+=c.fromCharCode(h<<2|g>>4);if(i!=64)b+=c.fromCharCode(e);if(k!=64)b+=c.fromCharCode(f)}return b}})(window);
